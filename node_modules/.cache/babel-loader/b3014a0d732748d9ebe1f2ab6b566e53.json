{"ast":null,"code":"/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\n\nvar MDCToolbarFoundation =\n/** @class */\nfunction (_super) {\n  tslib_1.__extends(MDCToolbarFoundation, _super);\n\n  function MDCToolbarFoundation(adapter) {\n    var _this = _super.call(this, tslib_1.__assign({}, MDCToolbarFoundation.defaultAdapter, adapter)) || this;\n\n    _this.checkRowHeightFrame_ = 0;\n    _this.scrollFrame_ = 0;\n    _this.executedLastChange_ = false;\n    _this.isFixed_ = false;\n    _this.isFixedLastRow_ = false;\n    _this.hasFlexibleFirstRow_ = false;\n    _this.useFlexDefaultBehavior_ = false;\n    _this.calculations_ = {\n      flexibleExpansionHeight: 0,\n      flexibleExpansionRatio: 0,\n      maxTranslateYDistance: 0,\n      maxTranslateYRatio: 0,\n      scrollThreshold: 0,\n      scrollThresholdRatio: 0,\n      toolbarHeight: 0,\n      toolbarRatio: 0,\n      toolbarRowHeight: 0\n    };\n    return _this;\n  }\n\n  Object.defineProperty(MDCToolbarFoundation, \"cssClasses\", {\n    get: function () {\n      return cssClasses;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCToolbarFoundation, \"strings\", {\n    get: function () {\n      return strings;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCToolbarFoundation, \"numbers\", {\n    get: function () {\n      return numbers;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(MDCToolbarFoundation, \"defaultAdapter\", {\n    get: function () {\n      // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n      return {\n        hasClass: function () {\n          return false;\n        },\n        addClass: function () {\n          return undefined;\n        },\n        removeClass: function () {\n          return undefined;\n        },\n        registerScrollHandler: function () {\n          return undefined;\n        },\n        deregisterScrollHandler: function () {\n          return undefined;\n        },\n        registerResizeHandler: function () {\n          return undefined;\n        },\n        deregisterResizeHandler: function () {\n          return undefined;\n        },\n        getViewportWidth: function () {\n          return 0;\n        },\n        getViewportScrollY: function () {\n          return 0;\n        },\n        getOffsetHeight: function () {\n          return 0;\n        },\n        getFirstRowElementOffsetHeight: function () {\n          return 0;\n        },\n        notifyChange: function () {\n          return undefined;\n        },\n        setStyle: function () {\n          return undefined;\n        },\n        setStyleForTitleElement: function () {\n          return undefined;\n        },\n        setStyleForFlexibleRowElement: function () {\n          return undefined;\n        },\n        setStyleForFixedAdjustElement: function () {\n          return undefined;\n        }\n      }; // tslint:enable:object-literal-sort-keys\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  MDCToolbarFoundation.prototype.init = function () {\n    var _this = this;\n\n    this.isFixed_ = this.adapter_.hasClass(cssClasses.FIXED);\n    this.isFixedLastRow_ = this.adapter_.hasClass(cssClasses.FIXED_LASTROW) && this.isFixed_;\n    this.hasFlexibleFirstRow_ = this.adapter_.hasClass(cssClasses.TOOLBAR_ROW_FLEXIBLE);\n\n    if (this.hasFlexibleFirstRow_) {\n      this.useFlexDefaultBehavior_ = this.adapter_.hasClass(cssClasses.FLEXIBLE_DEFAULT_BEHAVIOR);\n    }\n\n    this.resizeHandler_ = function () {\n      return _this.checkRowHeight_();\n    };\n\n    this.scrollHandler_ = function () {\n      return _this.updateToolbarStyles_();\n    };\n\n    this.adapter_.registerResizeHandler(this.resizeHandler_);\n    this.adapter_.registerScrollHandler(this.scrollHandler_);\n    this.initKeyRatio_();\n    this.setKeyHeights_();\n  };\n\n  MDCToolbarFoundation.prototype.destroy = function () {\n    this.adapter_.deregisterResizeHandler(this.resizeHandler_);\n    this.adapter_.deregisterScrollHandler(this.scrollHandler_);\n  };\n\n  MDCToolbarFoundation.prototype.updateAdjustElementStyles = function () {\n    if (this.isFixed_) {\n      this.adapter_.setStyleForFixedAdjustElement('margin-top', this.calculations_.toolbarHeight + \"px\");\n    }\n  };\n\n  MDCToolbarFoundation.prototype.getFlexibleExpansionRatio_ = function (scrollTop) {\n    // To prevent division by zero when there is no flexibleExpansionHeight\n    var delta = 0.0001;\n    return Math.max(0, 1 - scrollTop / (this.calculations_.flexibleExpansionHeight + delta));\n  };\n\n  MDCToolbarFoundation.prototype.checkRowHeight_ = function () {\n    var _this = this;\n\n    cancelAnimationFrame(this.checkRowHeightFrame_);\n    this.checkRowHeightFrame_ = requestAnimationFrame(function () {\n      return _this.setKeyHeights_();\n    });\n  };\n\n  MDCToolbarFoundation.prototype.setKeyHeights_ = function () {\n    var newToolbarRowHeight = this.getRowHeight_();\n\n    if (newToolbarRowHeight !== this.calculations_.toolbarRowHeight) {\n      this.calculations_.toolbarRowHeight = newToolbarRowHeight;\n      this.calculations_.toolbarHeight = this.calculations_.toolbarRatio * this.calculations_.toolbarRowHeight;\n      this.calculations_.flexibleExpansionHeight = this.calculations_.flexibleExpansionRatio * this.calculations_.toolbarRowHeight;\n      this.calculations_.maxTranslateYDistance = this.calculations_.maxTranslateYRatio * this.calculations_.toolbarRowHeight;\n      this.calculations_.scrollThreshold = this.calculations_.scrollThresholdRatio * this.calculations_.toolbarRowHeight;\n      this.updateAdjustElementStyles();\n      this.updateToolbarStyles_();\n    }\n  };\n\n  MDCToolbarFoundation.prototype.updateToolbarStyles_ = function () {\n    var _this = this;\n\n    cancelAnimationFrame(this.scrollFrame_);\n    this.scrollFrame_ = requestAnimationFrame(function () {\n      var scrollTop = _this.adapter_.getViewportScrollY();\n\n      var hasScrolledOutOfThreshold = _this.scrolledOutOfThreshold_(scrollTop);\n\n      if (hasScrolledOutOfThreshold && _this.executedLastChange_) {\n        return;\n      }\n\n      var flexibleExpansionRatio = _this.getFlexibleExpansionRatio_(scrollTop);\n\n      _this.updateToolbarFlexibleState_(flexibleExpansionRatio);\n\n      if (_this.isFixedLastRow_) {\n        _this.updateToolbarFixedState_(scrollTop);\n      }\n\n      if (_this.hasFlexibleFirstRow_) {\n        _this.updateFlexibleRowElementStyles_(flexibleExpansionRatio);\n      }\n\n      _this.executedLastChange_ = hasScrolledOutOfThreshold;\n\n      _this.adapter_.notifyChange({\n        flexibleExpansionRatio: flexibleExpansionRatio\n      });\n    });\n  };\n\n  MDCToolbarFoundation.prototype.scrolledOutOfThreshold_ = function (scrollTop) {\n    return scrollTop > this.calculations_.scrollThreshold;\n  };\n\n  MDCToolbarFoundation.prototype.initKeyRatio_ = function () {\n    var toolbarRowHeight = this.getRowHeight_();\n    var firstRowMaxRatio = this.adapter_.getFirstRowElementOffsetHeight() / toolbarRowHeight;\n    this.calculations_.toolbarRatio = this.adapter_.getOffsetHeight() / toolbarRowHeight;\n    this.calculations_.flexibleExpansionRatio = firstRowMaxRatio - 1;\n    this.calculations_.maxTranslateYRatio = this.isFixedLastRow_ ? this.calculations_.toolbarRatio - firstRowMaxRatio : 0;\n    this.calculations_.scrollThresholdRatio = (this.isFixedLastRow_ ? this.calculations_.toolbarRatio : firstRowMaxRatio) - 1;\n  };\n\n  MDCToolbarFoundation.prototype.getRowHeight_ = function () {\n    var breakpoint = numbers.TOOLBAR_MOBILE_BREAKPOINT;\n    return this.adapter_.getViewportWidth() < breakpoint ? numbers.TOOLBAR_ROW_MOBILE_HEIGHT : numbers.TOOLBAR_ROW_HEIGHT;\n  };\n\n  MDCToolbarFoundation.prototype.updateToolbarFlexibleState_ = function (flexibleExpansionRatio) {\n    this.adapter_.removeClass(cssClasses.FLEXIBLE_MAX);\n    this.adapter_.removeClass(cssClasses.FLEXIBLE_MIN);\n\n    if (flexibleExpansionRatio === 1) {\n      this.adapter_.addClass(cssClasses.FLEXIBLE_MAX);\n    } else if (flexibleExpansionRatio === 0) {\n      this.adapter_.addClass(cssClasses.FLEXIBLE_MIN);\n    }\n  };\n\n  MDCToolbarFoundation.prototype.updateToolbarFixedState_ = function (scrollTop) {\n    var translateDistance = Math.max(0, Math.min(scrollTop - this.calculations_.flexibleExpansionHeight, this.calculations_.maxTranslateYDistance));\n    this.adapter_.setStyle('transform', \"translateY(\" + -translateDistance + \"px)\");\n\n    if (translateDistance === this.calculations_.maxTranslateYDistance) {\n      this.adapter_.addClass(cssClasses.FIXED_AT_LAST_ROW);\n    } else {\n      this.adapter_.removeClass(cssClasses.FIXED_AT_LAST_ROW);\n    }\n  };\n\n  MDCToolbarFoundation.prototype.updateFlexibleRowElementStyles_ = function (flexibleExpansionRatio) {\n    if (this.isFixed_) {\n      var height = this.calculations_.flexibleExpansionHeight * flexibleExpansionRatio;\n      this.adapter_.setStyleForFlexibleRowElement('height', height + this.calculations_.toolbarRowHeight + \"px\");\n    }\n\n    if (this.useFlexDefaultBehavior_) {\n      this.updateElementStylesDefaultBehavior_(flexibleExpansionRatio);\n    }\n  };\n\n  MDCToolbarFoundation.prototype.updateElementStylesDefaultBehavior_ = function (flexibleExpansionRatio) {\n    var maxTitleSize = numbers.MAX_TITLE_SIZE;\n    var minTitleSize = numbers.MIN_TITLE_SIZE;\n    var currentTitleSize = (maxTitleSize - minTitleSize) * flexibleExpansionRatio + minTitleSize;\n    this.adapter_.setStyleForTitleElement('font-size', currentTitleSize + \"rem\");\n  };\n\n  return MDCToolbarFoundation;\n}(MDCFoundation);\n\nexport { MDCToolbarFoundation }; // tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\n\nexport default MDCToolbarFoundation;","map":{"version":3,"sources":["foundation.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\nimport * as tslib_1 from \"tslib\";\nimport { MDCFoundation } from '@material/base/foundation';\nimport { cssClasses, numbers, strings } from './constants';\nvar MDCToolbarFoundation = /** @class */ (function (_super) {\n    tslib_1.__extends(MDCToolbarFoundation, _super);\n    function MDCToolbarFoundation(adapter) {\n        var _this = _super.call(this, tslib_1.__assign({}, MDCToolbarFoundation.defaultAdapter, adapter)) || this;\n        _this.checkRowHeightFrame_ = 0;\n        _this.scrollFrame_ = 0;\n        _this.executedLastChange_ = false;\n        _this.isFixed_ = false;\n        _this.isFixedLastRow_ = false;\n        _this.hasFlexibleFirstRow_ = false;\n        _this.useFlexDefaultBehavior_ = false;\n        _this.calculations_ = {\n            flexibleExpansionHeight: 0,\n            flexibleExpansionRatio: 0,\n            maxTranslateYDistance: 0,\n            maxTranslateYRatio: 0,\n            scrollThreshold: 0,\n            scrollThresholdRatio: 0,\n            toolbarHeight: 0,\n            toolbarRatio: 0,\n            toolbarRowHeight: 0,\n        };\n        return _this;\n    }\n    Object.defineProperty(MDCToolbarFoundation, \"cssClasses\", {\n        get: function () {\n            return cssClasses;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCToolbarFoundation, \"strings\", {\n        get: function () {\n            return strings;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCToolbarFoundation, \"numbers\", {\n        get: function () {\n            return numbers;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(MDCToolbarFoundation, \"defaultAdapter\", {\n        get: function () {\n            // tslint:disable:object-literal-sort-keys Methods should be in the same order as the adapter interface.\n            return {\n                hasClass: function () { return false; },\n                addClass: function () { return undefined; },\n                removeClass: function () { return undefined; },\n                registerScrollHandler: function () { return undefined; },\n                deregisterScrollHandler: function () { return undefined; },\n                registerResizeHandler: function () { return undefined; },\n                deregisterResizeHandler: function () { return undefined; },\n                getViewportWidth: function () { return 0; },\n                getViewportScrollY: function () { return 0; },\n                getOffsetHeight: function () { return 0; },\n                getFirstRowElementOffsetHeight: function () { return 0; },\n                notifyChange: function () { return undefined; },\n                setStyle: function () { return undefined; },\n                setStyleForTitleElement: function () { return undefined; },\n                setStyleForFlexibleRowElement: function () { return undefined; },\n                setStyleForFixedAdjustElement: function () { return undefined; },\n            };\n            // tslint:enable:object-literal-sort-keys\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MDCToolbarFoundation.prototype.init = function () {\n        var _this = this;\n        this.isFixed_ = this.adapter_.hasClass(cssClasses.FIXED);\n        this.isFixedLastRow_ = this.adapter_.hasClass(cssClasses.FIXED_LASTROW) && this.isFixed_;\n        this.hasFlexibleFirstRow_ = this.adapter_.hasClass(cssClasses.TOOLBAR_ROW_FLEXIBLE);\n        if (this.hasFlexibleFirstRow_) {\n            this.useFlexDefaultBehavior_ = this.adapter_.hasClass(cssClasses.FLEXIBLE_DEFAULT_BEHAVIOR);\n        }\n        this.resizeHandler_ = function () { return _this.checkRowHeight_(); };\n        this.scrollHandler_ = function () { return _this.updateToolbarStyles_(); };\n        this.adapter_.registerResizeHandler(this.resizeHandler_);\n        this.adapter_.registerScrollHandler(this.scrollHandler_);\n        this.initKeyRatio_();\n        this.setKeyHeights_();\n    };\n    MDCToolbarFoundation.prototype.destroy = function () {\n        this.adapter_.deregisterResizeHandler(this.resizeHandler_);\n        this.adapter_.deregisterScrollHandler(this.scrollHandler_);\n    };\n    MDCToolbarFoundation.prototype.updateAdjustElementStyles = function () {\n        if (this.isFixed_) {\n            this.adapter_.setStyleForFixedAdjustElement('margin-top', this.calculations_.toolbarHeight + \"px\");\n        }\n    };\n    MDCToolbarFoundation.prototype.getFlexibleExpansionRatio_ = function (scrollTop) {\n        // To prevent division by zero when there is no flexibleExpansionHeight\n        var delta = 0.0001;\n        return Math.max(0, 1 - scrollTop / (this.calculations_.flexibleExpansionHeight + delta));\n    };\n    MDCToolbarFoundation.prototype.checkRowHeight_ = function () {\n        var _this = this;\n        cancelAnimationFrame(this.checkRowHeightFrame_);\n        this.checkRowHeightFrame_ = requestAnimationFrame(function () { return _this.setKeyHeights_(); });\n    };\n    MDCToolbarFoundation.prototype.setKeyHeights_ = function () {\n        var newToolbarRowHeight = this.getRowHeight_();\n        if (newToolbarRowHeight !== this.calculations_.toolbarRowHeight) {\n            this.calculations_.toolbarRowHeight = newToolbarRowHeight;\n            this.calculations_.toolbarHeight = this.calculations_.toolbarRatio * this.calculations_.toolbarRowHeight;\n            this.calculations_.flexibleExpansionHeight =\n                this.calculations_.flexibleExpansionRatio * this.calculations_.toolbarRowHeight;\n            this.calculations_.maxTranslateYDistance =\n                this.calculations_.maxTranslateYRatio * this.calculations_.toolbarRowHeight;\n            this.calculations_.scrollThreshold =\n                this.calculations_.scrollThresholdRatio * this.calculations_.toolbarRowHeight;\n            this.updateAdjustElementStyles();\n            this.updateToolbarStyles_();\n        }\n    };\n    MDCToolbarFoundation.prototype.updateToolbarStyles_ = function () {\n        var _this = this;\n        cancelAnimationFrame(this.scrollFrame_);\n        this.scrollFrame_ = requestAnimationFrame(function () {\n            var scrollTop = _this.adapter_.getViewportScrollY();\n            var hasScrolledOutOfThreshold = _this.scrolledOutOfThreshold_(scrollTop);\n            if (hasScrolledOutOfThreshold && _this.executedLastChange_) {\n                return;\n            }\n            var flexibleExpansionRatio = _this.getFlexibleExpansionRatio_(scrollTop);\n            _this.updateToolbarFlexibleState_(flexibleExpansionRatio);\n            if (_this.isFixedLastRow_) {\n                _this.updateToolbarFixedState_(scrollTop);\n            }\n            if (_this.hasFlexibleFirstRow_) {\n                _this.updateFlexibleRowElementStyles_(flexibleExpansionRatio);\n            }\n            _this.executedLastChange_ = hasScrolledOutOfThreshold;\n            _this.adapter_.notifyChange({ flexibleExpansionRatio: flexibleExpansionRatio });\n        });\n    };\n    MDCToolbarFoundation.prototype.scrolledOutOfThreshold_ = function (scrollTop) {\n        return scrollTop > this.calculations_.scrollThreshold;\n    };\n    MDCToolbarFoundation.prototype.initKeyRatio_ = function () {\n        var toolbarRowHeight = this.getRowHeight_();\n        var firstRowMaxRatio = this.adapter_.getFirstRowElementOffsetHeight() / toolbarRowHeight;\n        this.calculations_.toolbarRatio = this.adapter_.getOffsetHeight() / toolbarRowHeight;\n        this.calculations_.flexibleExpansionRatio = firstRowMaxRatio - 1;\n        this.calculations_.maxTranslateYRatio =\n            this.isFixedLastRow_ ? this.calculations_.toolbarRatio - firstRowMaxRatio : 0;\n        this.calculations_.scrollThresholdRatio =\n            (this.isFixedLastRow_ ? this.calculations_.toolbarRatio : firstRowMaxRatio) - 1;\n    };\n    MDCToolbarFoundation.prototype.getRowHeight_ = function () {\n        var breakpoint = numbers.TOOLBAR_MOBILE_BREAKPOINT;\n        return this.adapter_.getViewportWidth() < breakpoint ?\n            numbers.TOOLBAR_ROW_MOBILE_HEIGHT : numbers.TOOLBAR_ROW_HEIGHT;\n    };\n    MDCToolbarFoundation.prototype.updateToolbarFlexibleState_ = function (flexibleExpansionRatio) {\n        this.adapter_.removeClass(cssClasses.FLEXIBLE_MAX);\n        this.adapter_.removeClass(cssClasses.FLEXIBLE_MIN);\n        if (flexibleExpansionRatio === 1) {\n            this.adapter_.addClass(cssClasses.FLEXIBLE_MAX);\n        }\n        else if (flexibleExpansionRatio === 0) {\n            this.adapter_.addClass(cssClasses.FLEXIBLE_MIN);\n        }\n    };\n    MDCToolbarFoundation.prototype.updateToolbarFixedState_ = function (scrollTop) {\n        var translateDistance = Math.max(0, Math.min(scrollTop - this.calculations_.flexibleExpansionHeight, this.calculations_.maxTranslateYDistance));\n        this.adapter_.setStyle('transform', \"translateY(\" + -translateDistance + \"px)\");\n        if (translateDistance === this.calculations_.maxTranslateYDistance) {\n            this.adapter_.addClass(cssClasses.FIXED_AT_LAST_ROW);\n        }\n        else {\n            this.adapter_.removeClass(cssClasses.FIXED_AT_LAST_ROW);\n        }\n    };\n    MDCToolbarFoundation.prototype.updateFlexibleRowElementStyles_ = function (flexibleExpansionRatio) {\n        if (this.isFixed_) {\n            var height = this.calculations_.flexibleExpansionHeight * flexibleExpansionRatio;\n            this.adapter_.setStyleForFlexibleRowElement('height', height + this.calculations_.toolbarRowHeight + \"px\");\n        }\n        if (this.useFlexDefaultBehavior_) {\n            this.updateElementStylesDefaultBehavior_(flexibleExpansionRatio);\n        }\n    };\n    MDCToolbarFoundation.prototype.updateElementStylesDefaultBehavior_ = function (flexibleExpansionRatio) {\n        var maxTitleSize = numbers.MAX_TITLE_SIZE;\n        var minTitleSize = numbers.MIN_TITLE_SIZE;\n        var currentTitleSize = (maxTitleSize - minTitleSize) * flexibleExpansionRatio + minTitleSize;\n        this.adapter_.setStyleForTitleElement('font-size', currentTitleSize + \"rem\");\n    };\n    return MDCToolbarFoundation;\n}(MDCFoundation));\nexport { MDCToolbarFoundation };\n// tslint:disable-next-line:no-default-export Needed for backward compatibility with MDC Web v0.44.0 and earlier.\nexport default MDCToolbarFoundation;\n//# sourceMappingURL=foundation.js.map"]},"metadata":{},"sourceType":"module"}